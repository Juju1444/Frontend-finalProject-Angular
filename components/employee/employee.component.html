<div class="main-page-wrapper">

      
    <div class="our-solution section-spacing my-5">
        <div class="container">
            <div class="theme-title-one">
                <h2>Employees</h2>
            </div> <!-- /.theme-title-one -->
            <div class="wrapper">
                <div class="row ml-5">

                    <div *ngIf="user.role =='admin'" class="col-md-12">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#createEmp">
                            Add Employee
                          </button>
                        
                       
                    </div>

                
             
                </div> <!-- /.row -->

                <div class="my-4 w-100">
                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col"> Name</th>
                            <th scope="col">Phone</th>
                            <th scope="col">Department</th>
                            <th scope="col">Salary</th>
                            <th *ngIf="user.role =='admin'" scope="col">Actions</th>


                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let emp of employees; let i =index;">
                            <th scope="row">{{ i+1 }}</th>
                            <td>{{ emp.name }}</td>
                            <td>{{ emp.phone }}</td>
                            <td>{{ emp.department.name }}</td>
                            <td>{{ emp.salary }}</td>
                            <td *ngIf="user.role =='admin'">
                                <button (click)="showEmp(emp.id)" type="button" data-toggle="modal" data-target="#editEmp" class="btn btn-sm btn-primary mx-2"> Edit</button>
                                <button type="button" (click)="delete(emp.id)" class="btn btn-sm btn-danger mx-2"> Delete</button>

                            </td>
                          </tr>
                          
                        </tbody>
                      </table>
                </div>




            </div> <!-- /.wrapper -->
        </div> <!-- /.container -->
    </div> <!-- /.our-solution -->


   

  

    <!--
    =====================================================
        Footer
    =====================================================
    -->
    <!-- /.theme-footer-two -->
    

    <!-- Scroll Top Button -->
    <button class="scroll-top tran3s">
        <i class="fa fa-angle-up" aria-hidden="true"></i>
    </button>
    



</div> <!-- /.main-page-wrapper -->




<!-- create emp -->

  <div class="modal fade" id="createEmp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Create Employee</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form [formGroup]="employeeFormCreate" (ngSubmit)="create()">

                <div class="form-group my-2">
                    <label for="">Name</label>
                    <input formControlName="name" type="text" name="name" class="form-control">
                </div>

                <div class="form-group my-2">
                    <label for="">Phone number</label>
                    <input formControlName="phone" type="tel" name="phone" class="form-control">
                </div>
                <div class="form-group my-2">
                    <label for="">Department</label>
                    <select formControlName="department_id" class="form-control" name="department_id" id="">
                        <option *ngFor="let department of departments" [value]="department?.id">{{ department?.name }}</option>
                    </select>
                </div>

                <div class="form-group my-2">
                    <label for="">Salary</label>
                    <input formControlName="salary" type="text" name="salary" class="form-control">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary"> Add</button>
                </div>
            </form>
        </div>
        
      </div>
    </div>
  </div>

  <!-- edit emp -->

  
  <div class="modal fade" id="editEmp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit Employee</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form [formGroup]="employeeFormEdit" (ngSubmit)="update()">

                <div class="form-group my-2">
                    <label for="">Name</label>
                    <input formControlName="name" type="text" name="name" class="form-control">
                    <input formControlName="id" type="hidden" name="id" class="form-control">

                </div>

                <div class="form-group my-2">
                    <label for="">Phone number</label>
                    <input formControlName="phone" type="tel" name="phone" class="form-control">
                </div>
                <div class="form-group my-2">
                    <label for="">Department</label>
                    <select formControlName="department_id" class="form-control" name="department_id" id="">
                        <option *ngFor="let department of departments" [value]="department?.id">{{ department?.name }}</option>
                    </select>
                </div>

                <div class="form-group my-2">
                    <label for="">Salary</label>
                    <input formControlName="salary" type="text" name="salary" class="form-control">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary"> Update</button>
                </div>
            </form>
        </div>
        
      </div>
    </div>
  </div>